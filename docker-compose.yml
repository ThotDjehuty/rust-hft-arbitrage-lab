version: '3.9'
services:
  mock_apis:
    build:
      context: ./mock_apis
    container_name: mock_apis
    ports: [ "8000:8000" ]
    volumes: [ "./mock_apis/data:/data:ro" ]
  lab:
    build:
      context: .
      dockerfile: Dockerfile.no-tick
    container_name: rust-hft-arbitrage-lab
    ports: [ "8888:8888" ]
    volumes: [ ".:/app" ]
    environment: [ "PYTHONPATH=/app" ]
    depends_on: [ mock_apis ]

  streamlit:
    build: .
    ports:
      - "8501:8501"
    volumes:
      - ./:/app:cached
    environment:
      - PYTHONUNBUFFERED=1
    # Use a restart policy if desired
    restart: "no"
